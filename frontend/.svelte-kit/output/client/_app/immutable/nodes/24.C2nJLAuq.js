import"../chunks/DsnmJJEf.js";import"../chunks/2J32lFCu.js";import{o as Qe,a as f,e as T}from"../chunks/D5sqcERo.js";import{at as Ye,au as Ha,av as Ze,aq as m,aw as P,a as _,ax as at,b as a,W as V,r as et,s as d,ay as tt,az as s,ar as o,as as t,u as r,aA as ve,aB as Y,c as za,f as Ea,aC as st,aa as ue,ao as Wa}from"../chunks/DdWuALZu.js";import{i as E}from"../chunks/DNIL3y1X.js";import{e as Aa,i as Da}from"../chunks/qLEJnVdX.js";import{h as ot}from"../chunks/CgsUcASs.js";import{r as xa,s as Ua}from"../chunks/DjPkcCDc.js";import{s as de,c as lt}from"../chunks/D4-J_OgU.js";import{b as wa}from"../chunks/CnWbZhhT.js";import{b as pe}from"../chunks/pQeqK__H.js";import{p as rt}from"../chunks/CdEA5IGF.js";import{i as it}from"../chunks/-w5iKcy_.js";import{s as ct,a as be}from"../chunks/B3jtdlFh.js";import{g as nt}from"../chunks/C07Td5iz.js";import{v as Oa,b as A,e as va,m as Ba}from"../chunks/3qLZv7Rd.js";import{e as _e,a as Sa}from"../chunks/BCA_XIn1.js";import{e as me,m as vt,a as ut,c as dt,d as pt,p as bt}from"../chunks/y7-MpCW8.js";import{s as fe}from"../chunks/V8TKOVD4.js";var _t=m('<button class="primary svelte-1jwxbu7">+ Nuevo vehículo</button>'),mt=m('<a class="doc-chip mini svelte-1jwxbu7" target="_blank" rel="noreferrer">DESCARGAR</a>'),ft=m('<div class="field doc-field svelte-1jwxbu7"><div class="doc-label svelte-1jwxbu7"><span> </span> <div class="doc-label-meta svelte-1jwxbu7"><!></div></div> <div class="doc-actions svelte-1jwxbu7"><button type="button" class="outline svelte-1jwxbu7"> </button> <span> </span> <input type="file" class="file-input svelte-1jwxbu7"/></div></div>'),ht=m('<p class="doc-status svelte-1jwxbu7">Subiendo documentos...</p>'),xt=m('<section class="panel svelte-1jwxbu7"><div class="panel-head svelte-1jwxbu7"><div><p class="label svelte-1jwxbu7">Formulario</p> <h2 class="svelte-1jwxbu7"> </h2></div> <button class="ghost svelte-1jwxbu7">Cerrar</button></div> <form class="form-grid svelte-1jwxbu7"><label class="field svelte-1jwxbu7"><span>Placa</span> <input type="text" placeholder="ABC-123" required class="svelte-1jwxbu7"/></label> <label class="field svelte-1jwxbu7"><span>Marca</span> <input type="text" placeholder="Toyota" required class="svelte-1jwxbu7"/></label> <label class="field svelte-1jwxbu7"><span>Modelo</span> <input type="text" placeholder="Hiace" required class="svelte-1jwxbu7"/></label> <label class="field svelte-1jwxbu7"><span>Año</span> <input type="number" min="1900" max="2100" placeholder="2024" required class="svelte-1jwxbu7"/></label> <label class="field svelte-1jwxbu7"><span>Capacidad (kg)</span> <input type="number" min="1" placeholder="1000" required class="svelte-1jwxbu7"/></label> <label class="field svelte-1jwxbu7"><span>Tipo de combustible</span> <select class="svelte-1jwxbu7"><option>Selecciona combustible</option><option>Diésel</option><option>Gasolina</option><option>Gas</option><option>Eléctrico</option><option>Híbrido</option></select></label> <label class="field svelte-1jwxbu7"><span>Estado Operativo</span> <select class="svelte-1jwxbu7"><option>Operativo</option><option>En mantenimiento</option><option>En ruta</option><option>Inactivo</option></select></label> <div class="doc-block svelte-1jwxbu7"><div class="doc-head svelte-1jwxbu7"><p class="label svelte-1jwxbu7">Documentos y evidencias</p> <p class="doc-hint svelte-1jwxbu7">Opcional. Adjunta SOAT, tecnicomecánica, tarjeta de propiedad y fotos del vehículo.</p></div> <div class="doc-grid svelte-1jwxbu7"></div> <!></div> <div class="form-actions svelte-1jwxbu7"><button type="submit" class="primary svelte-1jwxbu7">Guardar</button> <button type="button" class="ghost svelte-1jwxbu7">Cancelar</button></div></form></section>'),wt=m('<div class="loading svelte-1jwxbu7"><div class="spinner svelte-1jwxbu7"></div> <p>Cargando vehículos...</p></div>'),jt=m('<div class="empty svelte-1jwxbu7"><p>No hay vehículos registrados.</p></div>'),gt=m('<button class="ghost svelte-1jwxbu7">Editar</button>'),yt=m('<button class="success svelte-1jwxbu7">Activar</button>'),kt=m('<button class="danger svelte-1jwxbu7">Desactivar</button>'),Ct=m('<button class="outline svelte-1jwxbu7">Eliminar</button>'),Et=m('<tr class="svelte-1jwxbu7"><td class="svelte-1jwxbu7"> </td><td class="svelte-1jwxbu7"> </td><td class="svelte-1jwxbu7"> </td><td class="svelte-1jwxbu7"> </td><td class="svelte-1jwxbu7"> </td><td class="svelte-1jwxbu7"> </td><td class="svelte-1jwxbu7"><span> </span></td><td class="actions svelte-1jwxbu7"><button class="ghost svelte-1jwxbu7">Ver</button> <!> <!> <!></td></tr>'),At=m('<div class="table-wrap svelte-1jwxbu7"><table class="svelte-1jwxbu7"><thead class="svelte-1jwxbu7"><tr class="svelte-1jwxbu7"><th class="svelte-1jwxbu7">Placa</th><th class="svelte-1jwxbu7">Marca</th><th class="svelte-1jwxbu7">Modelo</th><th class="svelte-1jwxbu7">Año</th><th class="svelte-1jwxbu7">Capacidad</th><th class="svelte-1jwxbu7">Combustible</th><th class="svelte-1jwxbu7">Estado</th><th class="svelte-1jwxbu7"></th></tr></thead><tbody class="svelte-1jwxbu7"></tbody></table></div>'),Dt=m('<div class="modal-backdrop svelte-1jwxbu7"><div class="modal svelte-1jwxbu7"><p class="label svelte-1jwxbu7">Confirmar</p> <h3 class="svelte-1jwxbu7"> </h3> <p class="lede svelte-1jwxbu7"> <strong> </strong>.</p> <div class="modal-actions svelte-1jwxbu7"><button class="ghost svelte-1jwxbu7">Cancelar</button> <button class="danger svelte-1jwxbu7">Confirmar</button></div></div></div>'),Ot=m('<p class="lede svelte-1jwxbu7">Cargando...</p>'),St=m('<button class="mini svelte-1jwxbu7" type="button">Descargar</button>'),Tt=m('<li class="doc-row svelte-1jwxbu7"><div><strong> </strong> </div> <!></li>'),Vt=m('<div class="list-scroll svelte-1jwxbu7"><ul class="lined svelte-1jwxbu7"></ul></div>'),$t=m('<p class="muted svelte-1jwxbu7">Sin documentos</p>'),Ft=m('<li class="svelte-1jwxbu7"><strong> </strong> </li>'),Mt=m('<div class="list-scroll svelte-1jwxbu7"><ul class="lined svelte-1jwxbu7"></ul></div>'),Nt=m('<p class="muted svelte-1jwxbu7">Sin historial</p>'),It=m('<h3 class="svelte-1jwxbu7"> </h3> <p class="lede small svelte-1jwxbu7"> </p> <div class="detail-scroll svelte-1jwxbu7"><div class="detail-grid svelte-1jwxbu7"><div class="card svelte-1jwxbu7"><div class="card-head svelte-1jwxbu7"><h4 class="svelte-1jwxbu7">Documentos</h4> <span class="pill svelte-1jwxbu7"> </span></div> <!></div> <div class="card full svelte-1jwxbu7"><div class="card-head svelte-1jwxbu7"><h4 class="svelte-1jwxbu7">Historial</h4> <span class="pill muted-pill svelte-1jwxbu7"> </span></div> <!></div></div></div>',1),Rt=m('<div class="modal-backdrop svelte-1jwxbu7"><div class="modal wide svelte-1jwxbu7"><p class="label svelte-1jwxbu7">Historial de vehículo</p> <!> <div class="modal-actions svelte-1jwxbu7"><button class="ghost svelte-1jwxbu7">Cerrar</button></div></div></div>'),Lt=m('<div class="page-shell svelte-1jwxbu7"><div class="bg-shape shape-a svelte-1jwxbu7" aria-hidden="true"></div> <div class="bg-shape shape-b svelte-1jwxbu7" aria-hidden="true"></div> <section class="hero svelte-1jwxbu7"><div class="hero-text svelte-1jwxbu7"><p class="eyebrow svelte-1jwxbu7">Flota</p> <h1 class="svelte-1jwxbu7">Gestión de Vehículos</h1> <p class="lede svelte-1jwxbu7">Administra placas, capacidad y estado operativo de la flota.</p> <div class="chips svelte-1jwxbu7"><span class="chip success svelte-1jwxbu7"> </span> <span class="chip muted svelte-1jwxbu7"> </span></div></div> <div class="hero-actions svelte-1jwxbu7"><!></div></section> <!> <section class="panel svelte-1jwxbu7"><div class="panel-head svelte-1jwxbu7"><div><p class="label svelte-1jwxbu7">Listado</p> <h2 class="svelte-1jwxbu7">Vehículos</h2></div></div> <!></section> <!> <!></div>');function ls(he,xe){Ye(xe,!1);const Ja=()=>be(vt,"$modulosConfig",Ka),G=()=>be(Oa,"$vehiculos",Ka),[Ka,we]=ct(),Ta=V(),_a=V();let ua=V(!1),da=V(null),w=V({open:!1,type:null,id:null,label:""}),i=V({open:!1,data:null,loading:!1}),v=V({placa:"",modelo:"",marca:"",año:"",capacidad_carga:"",tipo_combustible:"",estado_operativo:"operativo"});const Va={soat:null,tecnicomecanica:null,tarjeta_propiedad:null,foto_placa:null,foto_exterior:null,foto_interior:null};let $=V({...Va}),ja=V(!1),ga=[];const Xa="http://localhost:3000/api".replace(/\/api$/,"");let D=V({});const ma="vehiculos";let Qa=V(!1),Ya=V(!1),Za=V(!1),ae=V(!1);const ee=e=>{if(!e)return"—";const l=new Date(e),p=l.getTime();return Number.isNaN(p)?e:l.toLocaleString("es-CO",{dateStyle:"medium",timeStyle:"short"})};Qe(async()=>{if(!ut(ma)){A("No tienes acceso al módulo Vehículos","error"),nt("/");return}await $a()});async function je(e){d(i,{open:!0,data:null,loading:!0});try{const l=await va.obtenerHistorial(e.id_vehiculo);d(i,{open:!0,data:l,loading:!1})}catch{A("No se pudo cargar el historial","error"),d(i,{open:!1,data:null,loading:!1})}}async function $a(){Oa.update(e=>({...e,loading:!0}));try{const e=await va.listar();Oa.update(l=>({...l,items:e.vehiculos||[],loading:!1}))}catch(e){Oa.update(l=>({...l,error:e.message,loading:!1})),A(e.message,"error")}}function ge(){d(da,null),d(v,{placa:"",modelo:"",marca:"",año:"",capacidad_carga:"",tipo_combustible:"",estado_operativo:"operativo"}),d($,{...Va}),d(ja,!1),ga=[],d(D,{})}async function ye(){ge(),d(ua,!0),await ue(),fe()}async function ke(e){d(da,e.id_vehiculo),d(v,{placa:e.placa,modelo:e.modelo,marca:e.marca,año:e.año,capacidad_carga:e.capacidad_carga,tipo_combustible:e.tipo_combustible||"",estado_operativo:e.estado_operativo}),d(ua,!0),await ue(),fe(),$e(e.id_vehiculo)}const te={soat:"SOAT",tecnicomecanica:"TECNICOMECANICA",tarjeta_propiedad:"TARJETA_PROPIEDAD",foto_placa:"FOTO_PLACA",foto_exterior:"FOTO_EXTERIOR",foto_interior:"FOTO_INTERIOR"},Ce=Object.fromEntries(Object.entries(te).map(([e,l])=>[l,e])),se=[{key:"soat",label:"SOAT",accept:"application/pdf"},{key:"tecnicomecanica",label:"Tecnicomecánica",accept:"application/pdf"},{key:"tarjeta_propiedad",label:"Tarjeta de propiedad",accept:"application/pdf"},{key:"foto_placa",label:"Foto placa",accept:"image/png,image/jpeg,image/jpg"},{key:"foto_exterior",label:"Foto exterior",accept:"image/png,image/jpeg,image/jpg"},{key:"foto_interior",label:"Foto interior",accept:"image/png,image/jpeg,image/jpg"}],Ee=Object.fromEntries(se.map(e=>[e.key,e.accept.split(",")]));function Ae(e,l){const p=e?.target?.files?.[0]||null;if(p&&!Se(l,p)){A("Formato no permitido para este documento","warning"),e?.target&&(e.target.value=""),d($,{...a($),[l]:null});return}d($,{...a($),[l]:p})}function De(e){const l=document?.getElementById(`file-${e}`);l&&l.click()}const Oe=e=>e?.name||"Sin archivo",Se=(e,l)=>{const p=Ee[e]||[],h=(l.type||"").toLowerCase(),y=(l.name||"").split(".").pop()?.toLowerCase();return p.some(k=>{const x=k.toLowerCase();return x==="application/pdf"?h==="application/pdf"||y==="pdf":x.startsWith("image/")?h.startsWith("image/")||["jpg","jpeg","png"].includes(y||""):x.startsWith(".")?y===x.slice(1):h===x})},Te=e=>e?e.startsWith("http")?e:`${Xa}${e}`:"#";async function Ve(e){try{const l=await Ba.descargarDocumento(e),p=l?.descarga_url||l?.archivo_url,h=p?.startsWith("http")?p:p?`${Xa}${p}`:null;h&&typeof window<"u"?window.open(h,"_blank"):A("No se pudo obtener la URL de descarga","warning")}catch(l){A(l.message||"Error al descargar","error")}}async function $e(e){try{ga=(await Ba.listarDocumentos(e)).documentos||[],d(D,{}),ga.forEach(p=>{const h=Ce[p.tipo_documento];h&&Y(D,a(D)[h]=p)})}catch{ga=[],d(D,{}),A("No se pudieron cargar los documentos","warning")}finally{}}const Fa=()=>Object.values(a($)).some(Boolean);async function Fe(e){if(!Fa())return!0;d(ja,!0);const l=Object.entries(a($)).filter(([,y])=>y).map(([y,k])=>{const x=new FormData;return x.append("tipo_documento",te[y]),x.append("archivo",k),Ba.subirDocumento(e,x)}),p=await Promise.allSettled(l);return d(ja,!1),p.filter(y=>y.status==="rejected").length===0?(d($,{...Va}),!0):!1}async function Me(){if(!a(v).placa||!a(v).marca||!a(v).modelo||!a(v).año||!a(v).capacidad_carga){A("Completa todos los campos","warning");return}try{let e=a(da);a(da)?(await va.actualizar(a(da),a(v)),A("Vehículo actualizado","success")):(e=(await va.crear(a(v)))?.vehiculo?.id_vehiculo||e,A("Vehículo creado","success"));let l=!0;e&&Fa()?(l=await Fe(e),A(l?"Documentos cargados":"Algunos documentos no se cargaron. Reintenta.",l?"success":"warning")):Fa()&&!e&&A("Vehículo guardado pero sin ID para cargar documentos. Reabre y edita para adjuntar.","warning"),d(ua,!1),await $a()}catch(e){A(e.message,"error")}}function Ma(e,l){d(w,{open:!0,type:e,id:l.id_vehiculo,label:l.placa})}async function Ne(){if(!(!a(w).id||!a(w).type))try{a(w).type==="eliminar"?(await va.eliminar(a(w).id),A("Vehículo eliminado","success")):a(w).type==="desactivar"?(await va.desactivar(a(w).id),A("Vehículo desactivado","success")):a(w).type==="activar"&&(await va.activar(a(w).id),A("Vehículo activado","success")),d(w,{open:!1,type:null,id:null,label:""}),await $a()}catch(e){A(e.message,"error")}}Ha(()=>Ja(),()=>{d(Ta,Ja())}),Ha(()=>(a(Ta),me),()=>{a(Ta),d(Qa,dt(ma)),d(Ya,pt(ma)),d(Za,bt(ma)),d(ae,me(ma))}),Ha(()=>G(),()=>{d(_a,{total:G().items.length,operativos:G().items.filter(e=>e.estado_operativo==="operativo").length,inactivos:G().items.filter(e=>e.estado_operativo==="inactivo").length})}),Ze(),it();var Na=Lt();ot("1jwxbu7",e=>{et(()=>{tt.title="Gestión de Vehículos - TransConecta"})});var Ia=s(o(Na),4),Ra=o(Ia),oe=s(o(Ra),6),La=o(oe),Ie=o(La);t(La);var le=s(La,2),Re=o(le);t(le),t(oe),t(Ra);var re=s(Ra,2),Le=o(re);{var Pe=e=>{var l=_t();T("click",l,ye),_(e,l)};E(Le,e=>{a(Qa)&&e(Pe)})}t(re),t(Ia);var ie=s(Ia,2);{var Ge=e=>{var l=xt(),p=o(l),h=o(p),y=s(o(h),2),k=o(y,!0);t(y),t(h);var x=s(h,2);t(p);var M=s(p,2),O=o(M),F=s(o(O),2);xa(F),t(O);var u=s(O,2),q=s(o(u),2);xa(q),t(u);var N=s(u,2),Z=s(o(N),2);xa(Z),t(N);var I=s(N,2),pa=s(o(I),2);xa(pa),t(I);var R=s(I,2),ba=s(o(R),2);xa(ba),t(R);var H=s(R,2),X=s(o(H),2);P(()=>{a(v),ve(()=>{})});var L=o(X);L.value=L.__value="";var U=s(L);U.value=U.__value="Diesel";var z=s(U);z.value=z.__value="Gasolina";var aa=s(z);aa.value=aa.__value="Gas";var B=s(aa);B.value=B.__value="Electrico";var Q=s(B);Q.value=Q.__value="Hibrido",t(X),t(H);var ea=s(H,2),J=s(o(ea),2);P(()=>{a(v),ve(()=>{})});var W=o(J);W.value=W.__value="operativo";var K=s(W);K.value=K.__value="en_mantenimiento";var ta=s(K);ta.value=ta.__value="en_ruta";var sa=s(ta);sa.value=sa.__value="inactivo",t(J),t(ea);var oa=s(ea,2),la=s(o(oa),2);Aa(la,5,()=>se,Da,(c,n)=>{var C=ft(),S=o(C),ia=o(S),fa=o(ia,!0);t(ia);var ya=s(ia,2),Ga=o(ya);{var ca=na=>{var ne=mt();P(Xe=>Ua(ne,"href",Xe),[()=>(a(D),a(n),r(()=>Te(a(D)[a(n).key].archivo_url)))]),_(na,ne)};E(Ga,na=>{a(D),a(n),r(()=>a(D)[a(n).key])&&na(ca)})}t(ya),t(S);var ha=s(S,2),ka=o(ha),Je=o(ka,!0);t(ka);var Ca=s(ka,2),Ke=o(Ca,!0);t(Ca);var qa=s(Ca,2);t(ha),t(C),P(na=>{f(fa,(a(n),r(()=>a(n).label))),f(Je,(a(D),a(n),r(()=>a(D)[a(n).key]?"Actualizar documento":"Subir documento"))),de(Ca,1,lt((a($),a(n),a(D),r(()=>a($)[a(n).key]?"doc-pill":a(D)[a(n).key]?"doc-hint-light strong":"doc-hint-light"))),"svelte-1jwxbu7"),f(Ke,na),Ua(qa,"id",(a(n),r(()=>`file-${a(n).key}`))),Ua(qa,"accept",(a(n),r(()=>a(n).accept)))},[()=>(a($),a(n),a(D),r(()=>a($)[a(n).key]?Oe(a($)[a(n).key]):a(D)[a(n).key]?"Se reemplazará al actualizar":"Sin archivo"))]),T("click",ka,()=>De(a(n).key)),T("change",qa,na=>Ae(na,a(n).key)),_(c,C)}),t(la);var g=s(la,2);{var b=c=>{var n=ht();_(c,n)};E(g,c=>{a(ja)&&c(b)})}t(oa);var j=s(oa,2),ra=s(o(j),2);t(j),t(M),t(l),P(()=>f(k,a(da)?"Editar vehículo":"Nuevo vehículo")),T("click",x,()=>d(ua,!1)),wa(F,()=>a(v).placa,c=>Y(v,a(v).placa=c)),wa(q,()=>a(v).marca,c=>Y(v,a(v).marca=c)),wa(Z,()=>a(v).modelo,c=>Y(v,a(v).modelo=c)),wa(pa,()=>a(v).año,c=>Y(v,a(v).año=c)),wa(ba,()=>a(v).capacidad_carga,c=>Y(v,a(v).capacidad_carga=c)),pe(X,()=>a(v).tipo_combustible,c=>Y(v,a(v).tipo_combustible=c)),pe(J,()=>a(v).estado_operativo,c=>Y(v,a(v).estado_operativo=c)),T("click",ra,()=>d(ua,!1)),T("submit",M,rt(Me)),_(e,l)};E(ie,e=>{a(ua)&&e(Ge)})}var Pa=s(ie,2),qe=s(o(Pa),2);{var He=e=>{var l=wt();_(e,l)},ze=e=>{var l=za(),p=Ea(l);{var h=k=>{var x=jt();_(k,x)},y=k=>{var x=At(),M=o(x),O=s(o(M));Aa(O,5,()=>(G(),r(()=>G().items)),Da,(F,u)=>{var q=Et(),N=o(q),Z=o(N,!0);t(N);var I=s(N),pa=o(I,!0);t(I);var R=s(I),ba=o(R,!0);t(R);var H=s(R),X=o(H,!0);t(H);var L=s(H),U=o(L);t(L);var z=s(L),aa=o(z,!0);t(z);var B=s(z),Q=o(B),ea=o(Q,!0);t(Q),t(B);var J=s(B),W=o(J),K=s(W,2);{var ta=b=>{var j=gt();T("click",j,()=>ke(a(u))),_(b,j)};E(K,b=>{a(Ya)&&b(ta)})}var sa=s(K,2);{var oa=b=>{var j=za(),ra=Ea(j);{var c=C=>{var S=yt();T("click",S,()=>Ma("activar",a(u))),_(C,S)},n=C=>{var S=kt();T("click",S,()=>Ma("desactivar",a(u))),_(C,S)};E(ra,C=>{a(u),r(()=>a(u).estado_operativo==="inactivo")?C(c):C(n,!1)})}_(b,j)};E(sa,b=>{a(ae)&&b(oa)})}var la=s(sa,2);{var g=b=>{var j=Ct();T("click",j,()=>Ma("eliminar",a(u))),_(b,j)};E(la,b=>{a(Za)&&b(g)})}t(J),t(q),P((b,j)=>{f(Z,(a(u),r(()=>a(u).placa))),f(pa,(a(u),r(()=>a(u).marca))),f(ba,(a(u),r(()=>a(u).modelo))),f(X,(a(u),r(()=>a(u).año))),f(U,`${a(u),r(()=>a(u).capacidad_carga)??""} kg`),f(aa,(a(u),r(()=>a(u).tipo_combustible||"N/D"))),de(Q,1,b,"svelte-1jwxbu7"),f(ea,j)},[()=>(Wa(_e),a(u),r(()=>`status-pill status-${_e(a(u).estado_operativo)}`)),()=>(Wa(Sa),a(u),r(()=>Sa(a(u).estado_operativo)))]),T("click",W,()=>je(a(u))),_(F,q)}),t(O),t(M),t(x),_(k,x)};E(p,k=>{G(),r(()=>G().items.length===0)?k(h):k(y,!1)},!0)}_(e,l)};E(qe,e=>{G(),r(()=>G().loading)?e(He):e(ze,!1)})}t(Pa);var ce=s(Pa,2);{var We=e=>{var l=Dt(),p=o(l),h=s(o(p),2),y=o(h,!0);t(h);var k=s(h,2),x=o(k),M=s(x),O=o(M,!0);t(M),st(),t(k);var F=s(k,2),u=o(F),q=s(u,2);t(F),t(p),t(l),P(()=>{f(y,(a(w),r(()=>a(w).type==="eliminar"?"¿Eliminar vehículo?":a(w).type==="desactivar"?"¿Desactivar vehículo?":"¿Activar vehículo?"))),f(x,`${a(w),r(()=>a(w).type==="eliminar"?"Se eliminará ":a(w).type==="desactivar"?"Se marcará inactivo ":"Se marcará operativo ")??""} `),f(O,(a(w),r(()=>a(w).label)))}),T("click",u,()=>d(w,{open:!1,type:null,id:null,label:""})),T("click",q,Ne),_(e,l)};E(ce,e=>{a(w),r(()=>a(w).open)&&e(We)})}var Ue=s(ce,2);{var Be=e=>{var l=Rt(),p=o(l),h=s(o(p),2);{var y=O=>{var F=Ot();_(O,F)},k=O=>{var F=za(),u=Ea(F);{var q=N=>{var Z=It(),I=Ea(Z),pa=o(I,!0);t(I);var R=s(I,2),ba=o(R);t(R);var H=s(R,2),X=o(H),L=o(X),U=o(L),z=s(o(U),2),aa=o(z);t(z),t(U);var B=s(U,2);{var Q=g=>{var b=Vt(),j=o(b);Aa(j,5,()=>(a(i),r(()=>(a(i).data.documentos||[]).slice(0,5))),Da,(ra,c)=>{var n=Tt(),C=o(n),S=o(C),ia=o(S,!0);t(S);var fa=s(S);t(C);var ya=s(C,2);{var Ga=ca=>{var ha=St();T("click",ha,()=>Ve(a(c).id_documento)),_(ca,ha)};E(ya,ca=>{a(c),r(()=>a(c).id_documento)&&ca(Ga)})}t(n),P(ca=>{f(ia,ca),f(fa,` • ${a(c),r(()=>a(c).tipo_documento)??""}`)},[()=>(a(c),r(()=>ee(a(c).fecha_carga)))]),_(ra,n)}),t(j),t(b),_(g,b)},ea=g=>{var b=$t();_(g,b)};E(B,g=>{a(i),r(()=>a(i).data.documentos?.length)?g(Q):g(ea,!1)})}t(L);var J=s(L,2),W=o(J),K=s(o(W),2),ta=o(K);t(K),t(W);var sa=s(W,2);{var oa=g=>{var b=Mt(),j=o(b);Aa(j,5,()=>(a(i),r(()=>(a(i).data.historial||[]).slice(0,5))),Da,(ra,c)=>{var n=Ft(),C=o(n),S=o(C,!0);t(C);var ia=s(C);t(n),P(fa=>{f(S,fa),f(ia,` • ${a(c),r(()=>a(c).descripcion_evento)??""}`)},[()=>(a(c),r(()=>ee(a(c).fecha_evento)))]),_(ra,n)}),t(j),t(b),_(g,b)},la=g=>{var b=Nt();_(g,b)};E(sa,g=>{a(i),r(()=>a(i).data.historial?.length)?g(oa):g(la,!1)})}t(J),t(X),t(H),P((g,b,j)=>{f(pa,(a(i),r(()=>a(i).data.vehiculo?.placa||"Vehículo"))),f(ba,`Marca/Modelo: ${a(i),r(()=>a(i).data.vehiculo?.marca)??""} ${a(i),r(()=>a(i).data.vehiculo?.modelo)??""} • Estado: ${g??""}`),f(aa,`${b??""} / ${a(i),r(()=>a(i).data.total_documentos)??""}`),f(ta,`${j??""} / ${a(i),r(()=>a(i).data.total_eventos)??""}`)},[()=>(Wa(Sa),a(i),r(()=>Sa(a(i).data.vehiculo?.estado_operativo||""))),()=>(a(i),r(()=>Math.min(a(i).data.documentos?.length||0,5))),()=>(a(i),r(()=>Math.min(a(i).data.historial?.length||0,5)))]),_(N,Z)};E(u,N=>{a(i),r(()=>a(i).data)&&N(q)},!0)}_(O,F)};E(h,O=>{a(i),r(()=>a(i).loading)?O(y):O(k,!1)})}var x=s(h,2),M=o(x);t(x),t(p),t(l),T("click",M,()=>d(i,{open:!1,data:null,loading:!1})),_(e,l)};E(Ue,e=>{a(i),r(()=>a(i).open)&&e(Be)})}t(Na),P(()=>{f(Ie,`${a(_a),r(()=>a(_a).operativos)??""} operativos`),f(Re,`${a(_a),r(()=>a(_a).inactivos)??""} inactivos`)}),_(he,Na),at(),we()}export{ls as component};
